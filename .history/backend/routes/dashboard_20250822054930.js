const express = require('express');const router = express.Router();const TaiKhoan = require('../models/TaiKhoan');const Product = require('../models/Product');router.get('/stats', async (req, res) => {  try {    const totalUsers = await TaiKhoan.countDocuments({ trangThai: true });    const totalProducts = await Product.countDocuments();    const totalOrders = 156;     const totalRevenue = 125000000;     const revenueGrowth = 12.5;    const orderGrowth = 8.3;     res.json({      totalUsers,      totalProducts,      totalOrders,      totalRevenue,      revenueGrowth,      orderGrowth,    });  } catch (error) {    res.status(500).json({ message: error.message });  }});router.get('/recent-orders', async (req, res) => {  try {    const recentOrders = [      {        id: '1',        customerName: 'Nguyễn Văn A',        products: 'Canon EOS R5, Ống kính 24-70mm',        total: 85000000,        status: 'completed',        date: '2024-01-15',      },      {        id: '2',        customerName: 'Trần Thị B',        products: 'Sony A7 IV',        total: 45000000,        status: 'processing',        date: '2024-01-14',      },      {        id: '3',        customerName: 'Lê Văn C',        products: 'Nikon Z6 III, Ống kính 70-200mm',        total: 95000000,        status: 'shipped',        date: '2024-01-13',      },      {        id: '4',        customerName: 'Phạm Thị D',        products: 'Fujifilm X-T5',        total: 32000000,        status: 'completed',        date: '2024-01-12',      },      {        id: '5',        customerName: 'Hoàng Văn E',        products: 'Canon EOS R6 Mark II',        total: 68000000,        status: 'processing',        date: '2024-01-11',      },    ];    res.json(recentOrders);  } catch (error) {    res.status(500).json({ message: error.message });  }});router.get('/top-products', async (req, res) => {  try {    const topProducts = [      {        name: 'Canon EOS R5',        sales: 15,        revenue: 1200000000,        growth: 25,      },      {        name: 'Sony A7 IV',        sales: 12,        revenue: 540000000,        growth: 18,      },      {        name: 'Nikon Z6 III',        sales: 10,        revenue: 950000000,        growth: 32,      },      {        name: 'Fujifilm X-T5',        sales: 8,        revenue: 320000000,        growth: -5,      },      {        name: 'Canon EOS R6 Mark II',        sales: 7,        revenue: 476000000,        growth: 15,      },    ];    res.json(topProducts);  } catch (error) {    res.status(500).json({ message: error.message });  }});router.get('/revenue', async (req, res) => {  try {    const { period = 'monthly' } = req.query;    let revenueData;    if (period === 'monthly') {      revenueData = [        { month: 'T1', revenue: 85000000 },        { month: 'T2', revenue: 92000000 },        { month: 'T3', revenue: 78000000 },        { month: 'T4', revenue: 105000000 },        { month: 'T5', revenue: 125000000 },        { month: 'T6', revenue: 98000000 },      ];    } else if (period === 'weekly') {      revenueData = [        { week: 'Tuần 1', revenue: 25000000 },        { week: 'Tuần 2', revenue: 28000000 },        { week: 'Tuần 3', revenue: 32000000 },        { week: 'Tuần 4', revenue: 40000000 },      ];    } else {      revenueData = [        { day: 'T2', revenue: 8500000 },        { day: 'T3', revenue: 9200000 },        { day: 'T4', revenue: 7800000 },        { day: 'T5', revenue: 10500000 },        { day: 'T6', revenue: 12500000 },        { day: 'T7', revenue: 9800000 },        { day: 'CN', revenue: 7500000 },      ];    }    res.json(revenueData);  } catch (error) {    res.status(500).json({ message: error.message });  }});router.get('/sales-report', async (req, res) => {  try {    const { startDate, endDate, type } = req.query;    const salesReport = {      summary: {        totalSales: 125000000,        totalOrders: 156,        averageOrderValue: 801282,        conversionRate: 3.2,      },      topCategories: [        { name: 'Máy ảnh DSLR', sales: 45000000, percentage: 36 },        { name: 'Máy ảnh Mirrorless', sales: 38000000, percentage: 30.4 },        { name: 'Ống kính', sales: 25000000, percentage: 20 },        { name: 'Phụ kiện', sales: 17000000, percentage: 13.6 },      ],      topProducts: [        { name: 'Canon EOS R5', sales: 15, revenue: 1200000000 },        { name: 'Sony A7 IV', sales: 12, revenue: 540000000 },        { name: 'Nikon Z6 III', sales: 10, revenue: 950000000 },      ],    };    res.json(salesReport);  } catch (error) {    res.status(500).json({ message: error.message });  }});router.get('/customer-analytics', async (req, res) => {  try {    const customerAnalytics = {      totalCustomers: 89,      newCustomers: 12,      returningCustomers: 77,      customerSegments: [        { segment: 'VIP', count: 15, percentage: 16.9 },        { segment: 'Regular', count: 45, percentage: 50.6 },        { segment: 'New', count: 29, percentage: 32.5 },      ],      topCustomers: [        { name: 'Nguyễn Văn A', totalSpent: 250000000, orders: 5 },        { name: 'Trần Thị B', totalSpent: 180000000, orders: 3 },        { name: 'Lê Văn C', totalSpent: 150000000, orders: 4 },      ],    };    res.json(customerAnalytics);  } catch (error) {    res.status(500).json({ message: error.message });  }});module.exports = router;