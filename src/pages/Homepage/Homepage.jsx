import React, { useState, useEffect } from 'react'import { useNavigate } from 'react-router-dom'import TypeProduct from '../../components/TypeProduct/TypeProduct.jsx'import { WrapperTypeProduct, WrapperButtonMore, ProductsGrid } from './style.js'import SliderComponent from '../../components/SliderComponent/SliderComponent.jsx'import Slider1 from '../../assets/images/Slider1.jpg'import Slider2 from '../../assets/images/Slider2.jpg'import Slider4 from '../../assets/images/Slider4.png'import Slider5 from '../../assets/images/Slider5.png'import CardComponent from '../../components/CardComponent/CardComponent.jsx'import HeaderComponent from '../../components/HeaderComponent/HeaderComponent.jsx'import NavBarComponent from '../../components/NavBarComponent/NavBarComponent.jsx'import ButtonComponent from '../../components/ButtonComponent/ButtonComponent.jsx'import { WrapperProduct } from './style.js'import { useProducts } from '../../context/useProducts'import { PRODUCT_CATEGORIES } from '../../constants/categories'const Homepage = () => {  const navigate = useNavigate()  const { products, getAllActiveProducts, refreshProducts } = useProducts();  const arr = PRODUCT_CATEGORIES  const [featuredProducts, setFeaturedProducts] = useState([]);  const [hasInitialized, setHasInitialized] = useState(false);  useEffect(() => {    refreshProducts();  }, [refreshProducts]);  useEffect(() => {    const activeProducts = getAllActiveProducts();    if (activeProducts.length > 0 && !hasInitialized) {      const shuffledProducts = [...activeProducts].sort(() => Math.random() - 0.5);      const selectedProducts = shuffledProducts.slice(0, 8);      setFeaturedProducts(selectedProducts);      setHasInitialized(true);    }  }, [products, getAllActiveProducts, hasInitialized]);  const handleCategoryClick = (category) => {    navigate(`/products?category=${encodeURIComponent(category)}`)    window.scrollTo({      top: 0,      behavior: 'smooth'    })  }  return (    <>      <WrapperTypeProduct>        <div>          {arr.map((item, index) => {            return( <TypeProduct name={item} key={`category-${item}-${index}`} onClick={() => handleCategoryClick(item)} />            )          })}        </div>      </WrapperTypeProduct>      <div style={{backgroundColor: '#F2F2F2', width: '100vw', marginLeft: 'calc(-50vw + 50%)', marginRight: 'calc(-50vw + 50%)'}}>        <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '0 20px' }}>          <SliderComponent arrImage={[Slider1, Slider2, Slider4, Slider5]}/>        </div>      </div>             {}       <div style={{ padding: '40px 120px', backgroundColor: '#F2F2F2' }}>         <div style={{ textAlign: 'center', marginBottom: '20px' }}>           <h2 style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '10px' }}>             Sản phẩm nổi bật           </h2>         </div>                          <ProductsGrid>           {featuredProducts.length > 0 ? (             featuredProducts.map((product, index) => (               <CardComponent key={product._id || product.id || `featured-${index}`} product={product} />             ))           ) : (             <div style={{                gridColumn: '1 / -1',                textAlign: 'center',                padding: '40px',               color: '#666',               fontSize: '16px'             }}>               {getAllActiveProducts().length > 0 ? 'Đang tải sản phẩm...' : 'Không có sản phẩm nào'}             </div>           )}         </ProductsGrid>      </div>      <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', marginTop: '20px', marginBottom: '40px'}}>        <WrapperButtonMore           textButton='Xem Thêm'           type='outline'           styleButton={{            border: '1px solid rgb(11, 116, 229)',             color: 'rgb(11, 116, 229)',             width: '240px',             height: '38px',             borderRadius: '4px',             backgroundColor: '#fff'            }}            styleButtonText={{              fontWeight: '600',            }}            onClick={() => {              navigate('/products')              window.scrollTo({                top: 0,                behavior: 'smooth'              })            }}          />      </div>    </>  )}export default Homepage